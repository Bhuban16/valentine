<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Be My Valentine üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --red:#e63946;
}

* { box-sizing: border-box; }

body {
  margin:0;
  height:100vh;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  font-family:"Segoe UI",sans-serif;
}

.card {
  background:#fff;
  padding:30px;
  border-radius:22px;
  text-align:center;
  width:92%;
  max-width:420px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
  z-index:5;
}

h1 { color:var(--red); margin:10px 0; }
p { color:#555; }

input {
  padding:10px;
  width:100%;
  border-radius:20px;
  border:1px solid #ccc;
  margin-bottom:15px;
  text-align:center;
}

.buttons {
  position:relative;
  height:120px;
  margin-top:20px;
}

button {
  padding:14px 28px;
  border-radius:30px;
  border:none;
  font-size:16px;
  cursor:pointer;
}

#yes {
  background:var(--red);
  color:#fff;
}

#no {
  background:#adb5bd;
  color:#fff;
  position:fixed;
}

.progress {
  margin-top:15px;
  background:#eee;
  border-radius:20px;
  overflow:hidden;
}
.bar {
  height:10px;
  width:100%;
  background:var(--red);
  transition:.4s;
}

.heart {
  position:absolute;
  font-size:20px;
  animation:float 6s linear infinite;
  pointer-events:none;
}
@keyframes float {
  from { transform:translateY(100vh); opacity:1; }
  to { transform:translateY(-10vh); opacity:0; }
}

canvas {
  position:fixed;
  top:0;left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:1;
}

.final {
  color:#fff;
  animation:pop 1s ease;
}
@keyframes pop {
  from { transform:scale(.6); opacity:0; }
  to { transform:scale(1); opacity:1; }
}

.controls {
  margin-top:15px;
  display:flex;
  justify-content:space-between;
  gap:10px;
}
.small {
  font-size:12px;
  padding:6px 12px;
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="card" id="card">
  <h1>Hey ‚ù§Ô∏è</h1>
  <p>What‚Äôs your name?</p>
  <input id="nameInput" placeholder="Type here‚Ä¶">

  <p id="question" style="display:none;"></p>

  <div class="buttons">
    <button id="yes" style="display:none;">Yes üíñ</button>
    <button id="no" style="display:none;">No üôà</button>
  </div>

  <div class="progress" id="progress" style="display:none;">
    <div class="bar" id="bar"></div>
  </div>

  <div class="controls">
    <button class="small" id="musicBtn">Music üéµ</button>
    <button class="small" id="shareBtn">Share üîó</button>
  </div>
</div>

<audio id="music" loop>
  <source src="https://assets.mixkit.co/music/preview/mixkit-romantic-piano-loop-113.mp3">
</audio>

<script>
const nameInput = document.getElementById("nameInput");
const question = document.getElementById("question");
const yes = document.getElementById("yes");
const no = document.getElementById("no");
const bar = document.getElementById("bar");
const progress = document.getElementById("progress");
const card = document.getElementById("card");
const music = document.getElementById("music");
let noSize = 1;
let chance = 100;
let escapes = 0;

// Name submit
nameInput.addEventListener("keyup", e=>{
  if(e.key==="Enter" && nameInput.value.trim()){
    question.innerText = `${nameInput.value}, will you be my Valentine? üíï`;
    question.style.display="block";
    yes.style.display="inline-block";
    no.style.display="inline-block";
    progress.style.display="block";
    nameInput.style.display="none";
  }
});

// No button avoidance
function moveNo(){
  escapes++;

  // Shrinks slightly every time
  noSize = Math.max(noSize - 0.05, 0.4);
  no.style.transform = `scale(${noSize})`;

  const padding = 30;
  const x = Math.random() * (innerWidth - no.offsetWidth - padding);
  const y = Math.random() * (innerHeight - no.offsetHeight - padding);

  no.style.left = x + "px";
  no.style.top = y + "px";

  navigator.vibrate?.(30);
}

// Forever shy
no.addEventListener("mouseenter", moveNo);
no.addEventListener("mousemove", moveNo);
no.addEventListener("touchstart", moveNo);

// Runs away when cursor gets close
document.addEventListener("mousemove", e => {
  const r = no.getBoundingClientRect();
  const d = Math.hypot(
    e.clientX - (r.left + r.width / 2),
    e.clientY - (r.top + r.height / 2)
  );
  if (d < 120) moveNo();
});

// Yes clicked
yes.onclick = ()=>{
  card.innerHTML = `
    <div class="final">
      <h1>YAYYYY üíò</h1>
      <p>You just made my heart very happy ü•∞</p>
      <p>Happy Valentine‚Äôs Day ‚ù§Ô∏è</p>
    </div>
  `;
  launchFireworks();
};

// Hearts
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";
  h.innerHTML="‚ù§Ô∏è";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=15+Math.random()*20+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},400);

// Music
document.getElementById("musicBtn").onclick=()=>{
  music.paused?music.play():music.pause();
};

// Share
document.getElementById("shareBtn").onclick=()=>{
  navigator.clipboard.writeText(location.href);
  alert("Link copied üíï");
};

// Fireworks
const c=document.getElementById("fireworks");
const ctx=c.getContext("2d");
c.width=innerWidth; c.height=innerHeight;

function launchFireworks(){
  let particles=[];
  for(let i=0;i<200;i++){
    particles.push({
      x:innerWidth/2,
      y:innerHeight/2,
      vx:(Math.random()-.5)*10,
      vy:(Math.random()-.5)*10,
      life:100
    });
  }
  function animate(){
    ctx.clearRect(0,0,c.width,c.height);
    particles.forEach(p=>{
      p.x+=p.vx; p.y+=p.vy; p.life--;
      ctx.fillStyle=`rgba(230,57,70,${p.life/100})`;
      ctx.fillRect(p.x,p.y,3,3);
    });
    particles=particles.filter(p=>p.life>0);
    if(particles.length) requestAnimationFrame(animate);
  }
  animate();
}
</script>

</body>
</html>

